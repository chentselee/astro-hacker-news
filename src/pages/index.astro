---
import Layout from "../layouts/Layout.astro";
import { getStories } from "./api";
const page = parseInt(Astro.url.searchParams.get("page") || "1");
const stories = await getStories({ page });
---

<Layout title="Astro Hacker News">
	<main class="max-w-screen-lg mx-auto mt-2">
		<h1 class="bg-orange-600 font-bold text-sm px-1 py-0.5">Hacker News</h1>
		<div class="bg-[#f6f6ef] py-2 text-xs">
			<ol>
				{
					stories.map((story, index) => (
						<li class="px-2 py-1">
							<span>{index + 1}.</span>
							<a
								href={`/${story.id}`}
								class="before:content-['â–²'] before:text-stone-400 before:text-[4px] before:relative before:bottom-0.5"
							>
								{story.title}
							</a>
						</li>
					))
				}
			</ol>
			<div class="flex space-x-2 px-8">
				{page > 1 && <a href={`?page=${page - 1}`}>prev</a>}
				<a href={`?page=${page + 1}`}>next</a>
				<div>page: {page}</div>
			</div>
		</div>
	</main>
</Layout>
